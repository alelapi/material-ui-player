"use strict";(self.webpackChunkmaterial_ui_player=self.webpackChunkmaterial_ui_player||[]).push([[950],{"./src/stories/public/AudioCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,FirebaseStorage:()=>FirebaseStorage,__namedExportsOrder:()=>__namedExportsOrder,default:()=>AudioCard_stories});var react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),CardContent=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/CardContent/CardContent.js"),Grid=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/Grid/Grid.js"),Card=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/Card/Card.js"),utils=__webpack_require__("./src/lib/utils.ts"),VolumeBar=__webpack_require__("./src/components/VolumeBar.tsx"),ControlKeys=__webpack_require__("./src/components/ControlKeys.tsx"),MediaTime=__webpack_require__("./src/components/MediaTime.tsx"),Progress=__webpack_require__("./src/components/Progress.tsx"),SpeedBar=__webpack_require__("./src/components/SpeedBar.tsx"),styled=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/styles/styled.js"),hooks=__webpack_require__("./src/hooks/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const StyledCard=(0,styled.ZP)(Card.Z,{shouldForwardProp:prop=>"background"!==prop})(({background})=>({width:"100%",backgroundColor:background||"inherit"})),StyledCardContent=(0,styled.ZP)(CardContent.Z)(({theme})=>({display:"flex",flexDirection:"column",alignItems:"center",paddingTop:theme.spacing(1),paddingBottom:theme.spacing(1),"&:last-child":{paddingBottom:theme.spacing(1)}})),ControlsGrid=(0,styled.ZP)(Grid.Z)(({theme})=>({display:"flex",flexDirection:"row",alignItems:"center",[theme.breakpoints.down("md")]:{justifyContent:"space-between",flexGrow:1},[theme.breakpoints.up("md")]:{justifyContent:"start"}})),BarsGrid=(0,styled.ZP)(Grid.Z)(({theme})=>({display:"flex",flexDirection:"row",alignItems:"center",[theme.breakpoints.down("md")]:{justifyContent:"space-between",flexGrow:1},[theme.breakpoints.up("md")]:{justifyContent:"start"}})),AudioCard=props=>{const{color="primary",thickness="medium"}=props,player=(0,react.useRef)(null),{state,pause,setCurrentTime,load,play,stop,setProgress}=(0,hooks.G)((props=>({url:"",key:Math.random(),playing:!1,time:{currentTime:0,duration:0},playerTimeout:null,src:props.src}))(props)),{onEnded=()=>setCurrentTime(player.current,0),onBackwardClick=()=>{},onForwardClick=()=>{},loop=!!props.loop,autoplay=!!props.autoplay}=props,onPlay=(0,react.useCallback)(async()=>{if(!player.current.src){const audioUrl=await(0,utils.Gr)(props.src);load(player.current,audioUrl)}await play(player.current)},[load,play,props.src]);return(0,react.useEffect)(()=>{player.current.autoplay=autoplay,player.current.loop=loop,player.current.onended=()=>{pause(player.current),onEnded()}},[pause,onEnded,autoplay,loop]),(0,react.useEffect)(()=>{autoplay&&onPlay()},[autoplay,onPlay]),(0,jsx_runtime.jsx)(StyledCard,{background:props.background,children:(0,jsx_runtime.jsx)(StyledCardContent,{children:(0,jsx_runtime.jsxs)(Grid.Z,{container:!0,justifyContent:"center",alignItems:"center",sx:{width:"100%"},children:[(0,jsx_runtime.jsx)("audio",{ref:player,style:{display:"none"},children:state.url&&(0,jsx_runtime.jsx)("source",{type:(0,utils.bh)(state.url),src:state.url})},state.key),(0,jsx_runtime.jsx)(Grid.Z,{size:12,children:(0,jsx_runtime.jsx)(Progress.Z,{time:state.time,color,thickness,onProgressClick:async v=>await setProgress(player.current,v)})}),(0,jsx_runtime.jsxs)(ControlsGrid,{size:{xs:12,md:6},children:[(0,jsx_runtime.jsx)(MediaTime.Z,{time:state.time,TimeProps:props.TimeProps}),(0,jsx_runtime.jsx)(ControlKeys.Z,{onPauseClick:()=>pause(player.current),onPlayClick:onPlay,backward:props.backward,forward:props.forward,playing:state.playing,onForwardClick,onBackwardClick,onStopClick:()=>stop(player.current),color,BackwardProps:props.BackwardProps,StopProps:props.StopProps,PauseProps:props.PauseProps,PlayProps:props.PlayProps,ForwardProps:props.ForwardProps})]}),(0,jsx_runtime.jsxs)(BarsGrid,{size:{xs:12,md:6},children:[props.speed&&(0,jsx_runtime.jsx)(SpeedBar.Z,{player:player.current,color,thickness}),(0,jsx_runtime.jsx)(VolumeBar.Z,{mute:props.mute,player:player.current,color,thickness,MuteProps:props.MuteProps})]})]})})})};AudioCard.displayName="AudioCard";const components_AudioCard=AudioCard;var ThemeProvider=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/styles/ThemeProvider.js"),createTheme=__webpack_require__("./node_modules/.pnpm/@mui+material@7.0.2_@emotion+react@11.14.0_@types+react@18.2.79_react@18.2.0__@emotion+_189578b483de77d0ed9fd24c40f712ac/node_modules/@mui/material/esm/styles/createTheme.js");const AudioCard_stories={title:"Components/AudioCard",component:components_AudioCard,decorators:[Story=>(0,jsx_runtime.jsx)(ThemeProvider.Z,{theme:(0,createTheme.Z)(),children:(0,jsx_runtime.jsx)(Story,{})})],argTypes:{color:{defaultValue:"primary",control:{type:"radio"},options:["primary","secondary"]},thickness:{defaultValue:"medium",control:{type:"radio"},options:["thin","medium","large"]},onForwardClick:{action:"forward"},onBackwardClick:{action:"backward"},onEnded:{action:"end"},forward:{defaultValue:!0,control:{type:"radio"},options:[!0,!1,void 0]},backward:{defaultValue:!0,control:{type:"radio"},options:[!0,!1,void 0]},mute:{defaultValue:!0,control:{type:"radio"},options:[!0,!1,void 0]},speed:{defaultValue:!0,control:{type:"radio"},options:[!0,!1,void 0]},loop:{defaultValue:!1,control:{type:"radio"},options:[!0,!1,void 0]}}},Template=args=>(0,jsx_runtime.jsx)(components_AudioCard,{...args});Template.displayName="Template";const Default=Template.bind({});Default.args={src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"};const FirebaseStorage=Template.bind({});FirebaseStorage.args={src:new Promise(resolve=>{setTimeout(()=>{resolve("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3")},500)})},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <AudioCard {...args} />",...Default.parameters?.docs?.source}}},FirebaseStorage.parameters={...FirebaseStorage.parameters,docs:{...FirebaseStorage.parameters?.docs,source:{originalSource:"args => <AudioCard {...args} />",...FirebaseStorage.parameters?.docs?.source}}};const __namedExportsOrder=["Default","FirebaseStorage"]}}]);